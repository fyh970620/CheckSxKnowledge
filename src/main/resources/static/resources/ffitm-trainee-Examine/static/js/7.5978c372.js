webpackJsonp([7],{Atij:function(t,a,e){var s=e("qJuQ");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("X/Wc")("e4a319e8",s,!0,{})},FqF4:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-ctn"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:17}},[e("div",{staticClass:"grid-content bg-purple"},[e("div",{staticClass:"article-header"},[e("div",{staticClass:"article-title"},[t._v(t._s(t.articleInfo.subjectName))]),t._v(" "),e("div",{staticClass:"article-info clearfix"},[e("div",{staticClass:"article-info-left"},[e("span",[t._v("作者："+t._s(t.articleInfo.staffname))]),e("span",[t._v("|")]),t._v(" "),e("span",[t._v("发布时间："+t._s(t.articleInfo.createDate))]),e("span",[t._v("|")]),t._v(" "),e("span",[t._v("浏览"+t._s(t.readNum)+"次")]),e("span",[t._v("|")]),t._v(" "),e("span",[t._v("评论"+t._s(t.commentNum)+"次")])]),t._v(" "),e("div",{staticClass:"article-info-right"},[e("span",{staticClass:"alterArticle",on:{click:function(a){t.collect()}}},[e("i",{staticClass:"el-icon-star-off"}),t._v(" 收藏")]),e("span",[t._v("|")]),t._v(" "),e("span",{staticClass:"delArticle",on:{click:function(a){t.recommend()}}},[e("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" 推荐")])])])]),t._v(" "),e("div",{staticClass:"article-content"},[e("div",{staticClass:"know-article"},[e("div",{staticClass:"know-articles",domProps:{innerHTML:t._s("周报描述：<br><p>"+this.articleinfo.weeklyDesc+"</p>")}}),t._v(" "),e("div",{staticClass:"know-articles",domProps:{innerHTML:t._s("下周计划：<br><p>"+this.articleinfo.nextWeeklyDesc+"</p>")}}),t._v(" "),e("div",{staticClass:"know-articles",domProps:{innerHTML:t._s("学习笔记：<br><p>"+this.articleinfo.subjectNote+"</p>")}})]),t._v(" "),e("div",{staticClass:"article-attachs"},[e("span",{staticClass:"tag-name"},[t._v("附件：")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:void 0===this.articleInfo.attaches||0==t.articleInfo.attaches.length,expression:"typeof this.articleInfo.attaches === 'undefined'||articleInfo.attaches.length == 0"}],staticClass:"tag-content"},[t._v("无")]),t._v(" "),t._l(t.articleInfo.attaches,function(a,s){return e("span",{staticClass:"attach-group",on:{click:function(e){t.previewAttach(a)}}},[t._v(" "+t._s(a.attachName))])})],2),t._v(" "),e("div",{staticClass:"article-tag"},[e("span",{staticClass:"tag-name"},[t._v("标签：")]),t._v(" "),e("span",{staticClass:"tag-content"},[t._v(t._s(t.articleInfo.keyWord))])])])])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("div",{staticClass:"total-score"},[e("div",{staticClass:"score-star"},[e("span",[t._v("好评率")]),t._v(" "),e("el-rate",{staticClass:"rating",attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.totalRateValue,callback:function(a){t.totalRateValue=a},expression:"totalRateValue"}}),t._v(" "),e("div",{staticClass:"rating-num"},[t._v("已有"+t._s(t.commentNum)+"人评分")])],1)])])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"grid-content bg-purple"},[e("div",{staticClass:"visit-title"},[t._v("访问记录")]),t._v(" "),e("div",{staticClass:"visit-content"},[t._l(t.visitRoles,function(a,s){return e("div",{staticClass:"visit-group"},[e("div",{staticClass:"recently-visit"},[e("span",[e("i",{staticClass:"fa fa-street-view recently-visit-icon",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("span",{staticClass:"visit-time"},[t._v(t._s(a.time))]),t._v(" "),e("span",{staticClass:"visit-user-name"},[t._v(t._s(a.staffUser.staffname))])])])}),t._v(" "),e("div",{staticClass:"comment-part clearfix"},[e("div",{staticClass:"visit-pege"},[e("el-pagination",{attrs:{small:"","current-page":t.currentPages,"page-sizes":[5,10],"page-size":t.pageSizes,layout:"total,prev, pager, next, jumper",total:t.totals}})],1)])],2)])])],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:17}},[e("div",{staticClass:"grid-content bg-purple"},[e("div",{staticClass:"rate-comment"},[e("div",{staticClass:"rating-part clearfix"},[e("div",{staticClass:"user-rate clearfix"},[e("span",[t._v("评分：")]),t._v(" "),e("el-rate",{attrs:{"show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.userRateValue,callback:function(a){t.userRateValue=a},expression:"userRateValue"}},[t._v(">")])],1),t._v(" "),e("div",{staticClass:"user-comment"},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"在这里发表您的评论...",resize:"none"},model:{value:t.userCommentValue,callback:function(a){t.userCommentValue=a},expression:"userCommentValue"}})],1),t._v(" "),e("div",{staticClass:"comment-btn"},[e("el-button",{attrs:{size:"small",type:"primary",disabled:t.commentIsNotNull},on:{click:function(a){t.addComment()}}},[t._v("\n                发布评论\n              ")])],1)]),t._v(" "),e("div",{staticClass:"comment-part clearfix"},[e("h4",[t._v("评论")]),t._v(" "),0==t.commentsList.length?e("p",[t._v("暂无评论，我来发表第一篇评论！")]):e("div",t._l(t.commentsList,function(a,s){return e("div",{staticClass:"comment clearfix",attrs:{index:s}},[e("b",[t._v(t._s(a.staff.staffname)+"  "),e("span",[t._v(t._s(a.time))])]),t._v(" "),e("span",{staticClass:"delcomment",on:{click:function(e){t.delOneComment(a)}}},[t._v("×")]),t._v(" "),e("p",{staticClass:"pa-comment"},[t._v(t._s(a.comment))]),t._v(" "),e("div",{staticClass:"icon-comment",on:{click:function(e){t.togglecomment(a,{})}}},[e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}})]),e("br"),t._v(" "),e("transition",{attrs:{name:"adc"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:1==a.od,expression:"item.od==1"}],staticClass:"pa-comments clearfix"},[e("div",{staticClass:"pauser-comment"},[e("el-input",{attrs:{type:"textarea",placeholder:"在这里发表您的回复...",rows:2,resize:"none"},model:{value:t.userreplyValue,callback:function(a){t.userreplyValue=a},expression:"userreplyValue"}})],1),t._v(" "),e("div",{staticClass:"pacomment-btn clearfix"},[e("div",{staticClass:"reply-success",on:{click:function(e){t.addreplypa(a)}}},[e("i",{staticClass:"el-icon-success"}),t._v("发布回复")]),t._v(" "),e("div",{staticClass:"reply-error",on:{click:function(e){t.commentcancel(a,{})}}},[e("i",{staticClass:"el-icon-error"}),t._v("取消发布")])])])]),t._v(" "),a.children.length>0?e("div",{staticClass:"cdn-comment"},t._l(a.children.slice(1,[a.children.length]),function(a){return e("div",{staticClass:"reply"},[e("span",[t._v(t._s(a.staff.staffname)+"  回复  "+t._s(a.parentUser.staffname)),e("span",[t._v("  "+t._s(a.time))])]),t._v(" "),e("div",{staticClass:"icon-comments",on:{click:function(e){t.togglereply(a,a.od)}}},[e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("p",{staticClass:"cd-comment"},[t._v(t._s(a.comment))]),t._v(" "),e("transition",{attrs:{name:"adc"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:1==a.od,expression:"children.od==1"}],staticClass:"cd-comments clearfix"},[e("div",{staticClass:"pauser-comment"},[e("el-input",{attrs:{type:"textarea",placeholder:"在这里发表您的回复...",rows:2,resize:"none"},model:{value:t.userreplyValue,callback:function(a){t.userreplyValue=a},expression:"userreplyValue"}})],1),t._v(" "),e("div",{staticClass:"adcomment-btn clearfix"},[e("div",{staticClass:"reply-success",on:{click:function(e){t.addreplycd(a)}}},[e("i",{staticClass:"el-icon-success"}),t._v("发布回复")]),t._v(" "),e("div",{staticClass:"reply-error",on:{click:function(e){t.replycancel(a,a.od)}}},[e("i",{staticClass:"el-icon-error"}),t._v("取消发布")])])])])],1)})):t._e()],1)})),t._v(" "),e("div",{staticClass:"hello"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.currentPageChange}})],1)])])])])],1)],1)},o=[],i={render:s,staticRenderFns:o};a.a=i},cYtz:function(t,a,e){"use strict";function s(t){e("Atij")}Object.defineProperty(a,"__esModule",{value:!0});var o=e("gFYU"),i=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(a,t,function(){return o[t]})}(n);var c=e("FqF4"),l=e("/4AN"),r=s,d=l(i.a,c.a,!1,r,"data-v-37701abd",null);a.default=d.exports},gFYU:function(t,a,e){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var o=e("Xos8"),i=s(o),n=e("CxL4"),c=s(n);a.default={data:function(){var t;return t={od:0,replyclick:!1,delOneComments:"",addreplyList:"",addComments:"",totalRateValue:"",userCommentValue:"",checkWeeklyCollect:{},articleInfo:{},articleinfo:{},creatstaff:"",readNum:"",commentNum:""},(0,i.default)(t,"creatstaff",{creatstaffname:"",creatstaffID:""}),(0,i.default)(t,"commentsList",""),(0,i.default)(t,"visitRoles",[]),(0,i.default)(t,"subjectName",""),(0,i.default)(t,"multipleSelection",[]),(0,i.default)(t,"currentPage",1),(0,i.default)(t,"pageSize",10),(0,i.default)(t,"total",""),(0,i.default)(t,"multipleSelection",[]),(0,i.default)(t,"userRateValue",""),(0,i.default)(t,"currentPages",1),(0,i.default)(t,"pageSizes",10),(0,i.default)(t,"totals",""),t},mounted:function(){this.checkVisit(),this.getCountVisit(),this.getAauthor(),this.getList(),this.getComments(),this.getCountAvg()},methods:{checkVisit:function(){var t=this,a={pages:this.currentPages,pageSize:this.pageSizes,weeklyId:this.$route.query.id};c.default.checkVisit(a).then(function(a){console.log(a),t.visitRoles=a.data.list,t.totals=a.data.total,console.log(t.visitRoles)}).catch(function(t){console.log(t)})},getCountVisit:function(){var t=this,a={weeklyId:this.$route.query.id};c.default.getCountVisit(a).then(function(a){t.readNum=a.data}).catch(function(t){console.log(t)})},addVisitOne:function(){var t=this,a={staffId:this.staffID,weeklyId:parseInt(this.$route.query.id)};c.default.addVisitOne(a).then(function(a){console.log(a),t.checkVisit(),t.getCountVisit()}).catch(function(t){console.log(t)})},getComments:function(){var t=this,a={pages:this.currentPage,pageSize:this.pageSize,weeklyId:this.$route.query.id};c.default.getFyComments(a).then(function(a){t.total=a.data.total,t.commentNum=a.data.total,console.log(a),t.commentsList=a.data.list,console.log(t.commentsList)}).catch(function(t){console.log(t)})},getAauthor:function(){var t=this;c.default.getListSxByGType().then(function(a){console.log(a),t.Aauthor=a.data[4],console.log(t.Aauthor),t.staffname=t.Aauthor.staffname,t.staffID=t.Aauthor.staffId,t.addVisitOne()}).catch(function(t){console.log(t)})},getList:function(){var t=this,a={weeklyId:this.$route.query.id};console.log(a),c.default.getWeeklyDetailInfo(a).then(function(a){console.log(a),t.articleinfo=a.data,t.creatstaff=a.data.staff,console.log(t.creatstaff),t.creatstaffname=t.creatstaff.staffname,t.articleInfo={staffname:t.creatstaffname,subjectName:t.articleinfo.subjectName,keyWord:t.articleinfo.keyWord,createDate:t.articleinfo.createDate,staffType:t.articleinfo.staffType,subjectClass:t.articleinfo.subjectClass,subjectGroupType:t.articleinfo.subjectGroupType}}).catch(function(t){console.log(t)})},getCountAvg:function(){var t=this,a={weeklyId:this.$route.query.id};c.default.getCountAvg(a).then(function(a){console.log(a),t.avgs=a.data.responseBody,t.totalRateValue=t.avgs.avg,console.log(t.totalRateValue)}).catch(function(t){console.log(t)})},delOneComment:function(t){var a=this;this.$confirm("确认删除？").then(function(e){var s={commentId:t.commentId,weeklyId:parseInt(a.$route.query.id)};console.log(s),c.default.delOneComment(s).then(function(t){console.log(t),a.getComments(),a.getCountAvg()}).catch(function(t){console.log(t)})}).catch(function(t){})},addComment:function(){var t=this;this.addComments={comment:this.userCommentValue,commentGrade:20*this.userRateValue,commentStaffId:this.staffID,weeklyId:this.$route.query.id},console.log(this.addComments);var a={cwlc:this.addComments};c.default.addTopComments(a).then(function(a){console.log(a),t.getComments(),t.getCountAvg()}).catch(function(t){console.log(t)})},addreplypa:function(t){var a=this;this.addreplyList={comment:this.userreplyValue,commentGrade:"",commentStaffId:this.staffID,weeklyId:this.$route.query.id,commentParentId:t.commentId};var e={cwlc:this.addreplyList};console.log(e),c.default.addBackComments(e).then(function(t){console.log(t),a.getComments(),a.getCountAvg()}).catch(function(t){console.log(t)})},addreplycd:function(t){var a=this;this.addreplyList={comment:this.userreplyValue,commentGrade:"",commentStaffId:this.staffID,weeklyId:this.$route.query.id,commentParentId:t.commentId};var e={cwlc:this.addreplyList};console.log(e),c.default.addBackComments(e).then(function(t){console.log(t),a.getComments(),a.getCountAvg()}).catch(function(t){console.log(t)})},togglecomment:function(t){t.od=1},togglereply:function(t,a){t.od=1},commentcancel:function(t){t.od=0},replycancel:function(t,a){t.od=0},pageSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.getComments()},currentPageChange:function(t){this.currentPage=t,console.log("当前页: "+t),this.getComments()},pageSizeChanges:function(t){console.log("每页 "+t+" 条"),this.pageSizes=t,this.checkVisit(),this.getCountVisit()},currentPageChanges:function(t){this.currentPages=t,console.log("当前页: "+t),this.checkVisit(),this.getCountVisit()},collect:function(){var t=this;this.$prompt("请输入收藏备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var e=a.value;t.checkWeeklyCollect={weeklyId:parseInt(t.$route.query.id),collectStaffId:parseInt(t.staffID),collectRemark:e};var s={cwc:t.checkWeeklyCollect};console.log(s),c.default.addOneCollect(s).then(function(t){}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"取消收藏"})})},recommend:function(){var t=this,a={weeklyId:parseInt(this.$route.query.id),staffId:parseInt(this.staffID)};console.log(a),this.$confirm("确定要推荐吗?",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){var a={weeklyId:parseInt(t.$route.query.id),staffId:parseInt(t.$route.query.staffID)};console.log(a),c.default.addGoodWeeklyList(a).then(function(t){}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"取消推荐"})})}}}},qJuQ:function(t,a,e){a=t.exports=e("lcwS")(!1),a.push([t.i,".adcomment-btn[data-v-37701abd]{height:100%;margin:12px 90px 0 0}.pacomment-btn[data-v-37701abd]{height:100%;margin:12px 90px 18px 0}.cd-comments[data-v-37701abd],.pa-comments[data-v-37701abd]{margin:10px 60px 0 50px;width:100%;height:100%}.hello[data-v-37701abd]{float:right;margin:10px 0}.main-ctn[data-v-37701abd]{background:#f8f8f8}.bg-purple[data-v-37701abd]{background:#fff}.rating-num[data-v-37701abd]{color:#666;margin:10px 0 20px 120px;padding:10px}.score-star[data-v-37701abd]{color:#666}.score-star span[data-v-37701abd]{display:block;padding-top:20px;margin:0 0 20px 145px;font-size:18px}.rating[data-v-37701abd]{margin-left:80px}.visit[data-v-37701abd]{margin-top:20px}.visit-title[data-v-37701abd]{color:#666;font-size:18px;padding:14px 0 14px 20px}.grid-content[data-v-37701abd]{border-radius:4px;color:#333}.el-row[data-v-37701abd]{margin-bottom:20px}.article-header[data-v-37701abd]{color:#333;padding:20px 20px 0}.article-title[data-v-37701abd]{font-size:24px}.article-info[data-v-37701abd]{color:#a1a1a1;font-size:12px;margin:15px 0}.article-info span[data-v-37701abd]{margin-right:10px}.article-info-left[data-v-37701abd]{float:left}.article-info-right[data-v-37701abd]{float:right}.article-content[data-v-37701abd]{color:#666;padding:0 20px 14px}.know-article[data-v-37701abd]{padding:15px 0;font-size:14px;margin-bottom:20px}.know-articles[data-v-37701abd]{padding-bottom:20px}.article-attachs[data-v-37701abd]{padding-top:15px;border-top:1px solid #eee}.tag-name[data-v-37701abd]{color:#333;font-size:13px;font-weight:700}.attach-group[data-v-37701abd]{color:#419efe;font-size:13px;font-weight:700;margin-right:20px;cursor:pointer}.rate-comment[data-v-37701abd]{color:#333;padding:20px 20px 0}.user-rate span[data-v-37701abd]{float:left}.user-rate[data-v-37701abd]{margin-bottom:20px}.user-comment[data-v-37701abd]{width:85%;float:left;margin-right:20px}.user-comment[data-v-37701abd],.user-reply[data-v-37701abd]{display:inline-block;width:calc(100% - 100px);margin-right:15px}.rating-part[data-v-37701abd],.rating-parts[data-v-37701abd]{padding-bottom:20px;border-bottom:1px solid #eee}.rating-parts[data-v-37701abd]{padding-top:20px}.comment-title[data-v-37701abd]{margin-top:20px}.alterArticle[data-v-37701abd]{color:#409eff;cursor:pointer}.delArticle[data-v-37701abd]{color:#dfe222;cursor:pointer}.fa-thumbs-o-up[data-v-37701abd]{color:#e0e027;cursor:pointer}.fa-edit[data-v-37701abd]{color:#409eff;cursor:pointer}.visit-time[data-v-37701abd]{font-weight:500;font-size:12px;color:#999;margin-left:25px}.visit-user-name[data-v-37701abd]{margin-left:25px;font-weight:500;font-size:14px;color:#999}.reply-success[data-v-37701abd]{color:#74b6f8;float:right;margin-left:16px}.el-icon-success[data-v-37701abd],.fa-commenting-o[data-v-37701abd]{color:#74b6f8;cursor:pointer}.el-icon-error[data-v-37701abd]{color:red;cursor:pointer}.reply-error[data-v-37701abd]{color:red;float:right;cursor:pointer}.recently-visit-icon[data-v-37701abd]{color:#74b6f8;margin-left:40px}.recently-visit[data-v-37701abd]{margin-bottom:4px}.recently-visit span[data-v-37701abd]{color:#666}.visit-pege[data-v-37701abd]{padding:10px 0;float:right;width:95%;overflow:hidden}.one-visit-history[data-v-37701abd]{margin-bottom:3px}.reply[data-v-37701abd]{padding:15px 10px;margin:0 40px;background-color:#f8f8f8}.delcomment[data-v-37701abd]{color:red;float:right;margin-right:40px;cursor:pointer}.icon-comment[data-v-37701abd],.icon-comments[data-v-37701abd]{float:right;margin-right:40px;cursor:pointer;color:#666}.cd-comment[data-v-37701abd],.pa-comment[data-v-37701abd]{padding-top:10px}.comment[data-v-37701abd]{border-bottom:1px solid #eee;padding:20px 0}.cdn-comment[data-v-37701abd]{margin-top:5px}.adc-enter-active[data-v-37701abd],.adc-leave-active[data-v-37701abd]{-webkit-transition:opacity 1s;transition:opacity 1s}.adc-enter[data-v-37701abd],.adc-leave-to[data-v-37701abd]{opacity:0}",""])}});
//# sourceMappingURL=7.5978c372.js.map